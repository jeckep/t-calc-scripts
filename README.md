Это репозиторий содержит скрипт для подготовки данных портфеля перед загрузкой в https://t-calc.ru для анализа.

## Как получить данные портфеля и сформировать файл для t-calc.ru

### Для ползователей Windows (10 и выше)
1. Выпустите новый токен на чтение по ссылке: https://www.tinkoff.ru/invest/settings/api/, следуя инструкции ССЫЛКА_НА_ИНСТРУКЦИЮ. Токен может быть выпущен как на один брокерский счет, так и на все сразу.
Сохраните токен куда-нибудь.
2. Скачайте файл [scripts.js](./script.js) 
3. В папке где находится скачанный script.js откройте PowerShell (тут вероятно нужна инструкция как это сделать)
4. Установите программу для запуска скрипта (официальная инструкция тут: https://nodejs.org/en/download, на русском увы нет) ниже шаги оттуда
5. Установить менеджер fnm (скопируйте строку ниже в PowerShell и нажмите Enter) 
    ```
    winget install Schniz.fnm  
    ```
6. Установить node (скопируйте строку ниже в PowerShell и нажмите Enter)
    ```
    fnm install 22  
    ```
7. Проверьте версию node, команда ниже должна вернуть v22.13.0 (цифры могут отличаться главное чтобы в начале было 22) (скопируйте строку ниже в PowerShell и нажмите Enter)
    ```
    node -v  
    ```
8. Запустите скрипт (скопируйте строку ниже в PowerShell и нажмите Enter)   
    ```
    node --no-warnings script.js 
    ```
9. Скопируйте токен в PowerShell, правой кнопкой мыши Paste
10. В папке со скриптом должен появится файл: t-calc-data.json
11. Готово! Чтобы время от времени загружать новые данные достаточно шагов 8-9.

   
### Описание скрипта ([scripts.js](./script.js) )

Скрипт представляет собой текстовый файл, написанный на nodejs, и может быть легко проверен любым программистом,
который подтвердит, что скрипт делает только то что оговорено. А именно скрипт, используя токен, обращается к API Т Инвестиций,
и получает оттуда данные о счетах, включая данные об операциях вводы и вывода средств.
Этих данных достаточно для проведения анализа доходности портфелей. Стоит заметить, что результатом скрипта являются текстовый файл,
который также может быть проверен визуально. Он не содержит ни токена, ни персональной информации клиента.
Другими словами по этим данным нельзя понять кому они принадлежат.
